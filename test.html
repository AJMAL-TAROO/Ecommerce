<!DOCTYPE html>
<html>
<head>
<title>Test</title>
</head>
<body>
<script>
class EcommerceApp {
  constructor() {
    this.allOrders = [
      {
        id: 'test1',
        customerName: 'Test User',
        totalAmount: 100,
        status: 'pending',
        paymentScreenshot: 'https://firebasestorage.googleapis.com/test.jpg',
        items: []
      }
    ];
  }
  
  async viewOrderDetails(orderId) {
    try {
      const order = this.allOrders?.find(o => o.id === orderId);
      if (!order) {
        console.log('Order not found');
        return;
      }

      let screenshotUrl = order.paymentScreenshot;
      if (screenshotUrl && screenshotUrl.includes('firebasestorage.googleapis.com')) {
        console.log('About to call convertToBlobUrl, type:', typeof this.convertToBlobUrl);
        screenshotUrl = await this.convertToBlobUrl(screenshotUrl);
      }
      console.log('Success! Screenshot URL:', screenshotUrl);
    } catch (error) {
      console.error('Error viewing order details:', error);
    }
  }

  async convertToBlobUrl(firebaseUrl) {
    try {
      console.log('convertToBlobUrl called with:', firebaseUrl);
      return 'blob:converted-url';
    } catch (error) {
      console.error('Error converting to blob URL:', error);
      return firebaseUrl;
    }
  }
}

const app = new EcommerceApp();
console.log('App created');
console.log('convertToBlobUrl type:', typeof app.convertToBlobUrl);
app.viewOrderDetails('test1');
</script>
</body>
</html>
